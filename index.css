/* Global responsive utilities */

/* Dynamic viewport height fallback for mobile browsers */
:root { 
  --app-dvh: 100vh; 
  --safe-top: env(safe-area-inset-top, 0);
  --safe-bottom: env(safe-area-inset-bottom, 0);
  --safe-left: env(safe-area-inset-left, 0);
  --safe-right: env(safe-area-inset-right, 0);
}
@supports (height: 100dvh) {
  :root { --app-dvh: 100dvh; }
}

/* Use on containers that should size to the viewport safely */
.mobile-viewport {
  min-height: calc(var(--app-dvh) - 64px); /* account for navbar */
}

/* Respect safe areas on notch devices */
.safe-padding {
  padding-bottom: var(--safe-bottom);
  padding-left: var(--safe-left);
  padding-right: var(--safe-right);
}

.safe-padding-top {
  padding-top: var(--safe-top);
}

/* Smooth touch scrolling within nested panels */
.scroll-touch {
  -webkit-overflow-scrolling: touch;
  overscroll-behavior: contain;
}

/* Fluid media by default */
img, video, canvas {
  max-width: 100%;
  height: auto;
  display: block;
}

/* Utility to force fluid media if needed */
.responsive-media {
  width: 100%;
  height: auto;
}

/* Prevent long text from causing horizontal overflow */
.wrap-words {
  word-break: break-word;
  overflow-wrap: anywhere;
}

/* Reduce tap highlight and improve touch interactions */
* {
  -webkit-tap-highlight-color: rgba(0,0,0,0);
}

/* Mobile-friendly button sizing */
button, [role="button"] {
  min-height: 44px;
  min-width: 44px;
}

/* Responsive typography scale */
@media (max-width: 640px) {
  html {
    font-size: 14px;
  }
}

@media (max-width: 480px) {
  html {
    font-size: 13px;
  }
}

/* Container queries for responsive components */
.responsive-container {
  container-type: inline-size;
}

/* Improved mobile grid */
.mobile-grid-responsive {
  display: grid;
  gap: 1rem;
  grid-template-columns: 1fr;
}

@media (min-width: 640px) {
  .mobile-grid-responsive {
    grid-template-columns: repeat(2, 1fr);
    gap: 1.25rem;
  }
}

@media (min-width: 1024px) {
  .mobile-grid-responsive {
    grid-template-columns: repeat(3, 1fr);
    gap: 1.5rem;
  }
}

/* Viewport width constraint for mobile */
@media (max-width: 480px) {
  body, html {
    overflow-x: hidden;
  }
}

/* Better stack on mobile */
.stack-mobile {
  display: flex;
  flex-direction: column;
}

@media (min-width: 768px) {
  .stack-mobile {
    flex-direction: row;
  }
}
